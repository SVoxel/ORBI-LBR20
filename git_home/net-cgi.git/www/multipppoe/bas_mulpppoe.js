function show_hidden_help(b){if(!isIE_or_Opera()||IE_version()>=9){Not_IE_show_hidden_help(b)}else{var a=top.document.getElementById("formframe_div").style.height.replace(/px/,"");if(b%2==0){document.getElementById("main").style.height=a-285;document.getElementById("help").style.display="";document.getElementById("help_switch").className="open_help"}else{document.getElementById("help").style.display="none";document.getElementById("help_switch").className="close_help";document.getElementById("main").style.height=a-165}}}function show_hidden_help_top_button(b){if(!isIE_or_Opera()||IE_version()>=8){Not_IE_show_hidden_help(b)}else{var a=top.document.getElementById("formframe_div").style.height.replace(/px/,"");if(b%2==0){document.getElementById("main").style.height=a-285;document.getElementById("help").style.display="";document.getElementById("help_switch").className="open_help"}else{document.getElementById("help").style.display="none";document.getElementById("help_switch").className="close_help";document.getElementById("main").style.height=a-165}}}function loadMPhelp(b,a){if((loadMPhelp.arguments.length==1)||(a=="")){this.helpframe.location.href="/h"+b+".html"}else{this.helpframe.location.href="/h"+b+".html#"+a}return}function getObj(a){if(document.getElementById){return document.getElementById(a)}else{if(document.all){return document.all[a]}else{if(document.layers){return document.layers[a]}}}}function setIP(b){var a=b.WANAssign[0].checked;setDisabled(a,b.WPethr1,b.WPethr2,b.WPethr3,b.WPethr4);if(b.WANAssign[1].checked){b.DNSAssign[1].checked=true;setDNS(b)}DisableFixedIP=a}function setIP2(b){var a=b.WANAssign2[0].checked;setDisabled(a,b.pppoe2_ip1,b.pppoe2_ip2,b.pppoe2_ip3,b.pppoe2_ip4);if(b.WANAssign2[1].checked){b.DNSAssign2[1].checked=true;setDNS2(b)}DisableFixedIP=a}function setDNS(b){var a=b.DNSAssign[0].checked;if(b.WANAssign[1].checked){b.DNSAssign[1].checked=true;a=false}setDisabled(a,b.PDAddr1,b.PDAddr2,b.PDAddr3,b.PDAddr4,b.DAddr1,b.DAddr2,b.DAddr3,b.DAddr4);DisableFixedDNS=a}function setDNS2(b){var a=b.DNSAssign2[0].checked;if(b.WANAssign2[1].checked){b.DNSAssign2[1].checked=true;a=false}setDisabled(a,b.pppoe2_dnsp1,b.pppoe2_dnsp2,b.pppoe2_dnsp3,b.pppoe2_dnsp4,b.pppoe2_dnss1,b.pppoe2_dnss2,b.pppoe2_dnss3,b.pppoe2_dnss4);DisableFixedDNS=a}function change_mulpppoe_password(a){if(a.type=="password"){if(get_browser()=="Firefox"){a.value="";a.type="text"}else{if(a.name=="pppoe_passwd"){a.outerHTML='<input type="text" name="pppoe_passwd" maxlength="64" size="16" onFocus="this.select();" onKeyPress="return getkey(\'ssid\', event)" value="">';document.forms[0].pppoe_passwd.focus();document.forms[0].pppoe_passwd.focus()}else{if(a.name=="pppoe2_password"){a.outerHTML='<input type="text" name="pppoe2_password" maxlength="64" size="16" onFocus="this.select();" onKeyPress="return getkey(\'ssid\', event)" value="">';document.forms[0].pppoe2_password.focus();document.forms[0].pppoe2_password.focus()}}}}}function setPolicy(){var b=document.forms[0];var a=b.pppoe2_policy.selectedIndex;if(a==0){getObj("mul_doname").innerHTML=str3_div;b.userdefined.disabled=false}else{if(a==2){getObj("mul_protocol").innerHTML=str1_div;getObj("mul_port").innerHTML=str2_div;b.protocol.disabled=false;b.portstart.disabled=false;b.portend.disabled=false}else{if(a==1){getObj("mul_protocol").innerHTML=str1_div;getObj("mul_ip").innerHTML=str4_div;b.protocol.disabled=false;b.start_ip1.disabled=false;b.start_ip2.disabled=false;b.start_ip3.disabled=false;b.start_ip4.disabled=false;b.end_ip4.disabled=false}else{if(a==3){b.protocol.disabled=false;b.portstart.disabled=false;b.portend.disabled=false;b.userdefined.disabled=true;b.start_ip1.disabled=false;b.start_ip2.disabled=false;b.start_ip3.disabled=false;b.start_ip4.disabled=false;b.end_ip4.disabled=false}}}}}function check_mulpppoe_add(cf,flag){format_IP("start_ip1","start_ip2","start_ip3","start_ip4","end_ip4");var txt,c;cf.hidden_portstart.value="--";cf.hidden_portend.value="--";cf.hidden_protocol_value.value="--";cf.hidden_userdefined.value="--";cf.hidden_ip_start.value="--";cf.hidden_ip_end.value="--";if(cf.pppoe2_policy.selectedIndex==2||cf.pppoe2_policy.selectedIndex==3){if(cf.portstart.value==""||cf.portend.value==""){alert("$invalid_port");return false}txt=cf.portstart.value;for(i=0;i<txt.length;i++){c=txt.charAt(i);if("0123456789".indexOf(c,0)<0){alert("$invalid_start_port");return false}}txt=cf.portend.value;for(i=0;i<txt.length;i++){c=txt.charAt(i);if("0123456789".indexOf(c,0)<0){alert("$invalid_end_port");return false}}if(parseInt(cf.portstart.value)<1||parseInt(cf.portstart.value)>65535){alert("$invalid_start_port");return false}if(parseInt(cf.portend.value)<1||parseInt(cf.portend.value)>65535){alert("$invalid_end_port");return false}if(parseInt(cf.portend.value)<parseInt(cf.portstart.value)){alert("$end_port_greater");return false}for(i=1;i<=array_num;i++){var str=eval("mulpppoeArray"+i);var each_info=str.split(" ");if(each_info[4]=="--"||each_info[5]=="--"){continue}if(flag=="edit"){if(!(parseInt(each_info[4])>parseInt(cf.portend.value)||parseInt(each_info[5])<parseInt(cf.portstart.value))&&i!=select_edit){alert("$port_dup");return false}}else{if(!(parseInt(each_info[4])>parseInt(cf.portend.value)||parseInt(each_info[5])<parseInt(cf.portstart.value))){alert("$port_dup");return false}}}cf.hidden_portstart.value=cf.portstart.value;cf.hidden_portend.value=cf.portend.value}if(cf.pppoe2_policy.selectedIndex==0){txt=cf.userdefined.value;if(txt==""){alert("$invalid_user_type");return false}for(i=0;i<cf.userdefined.value.length;i++){if(isValidDdnsHost(cf.userdefined.value.charCodeAt(i))==false){alert("$invalid_user_type");return false}}for(i=1;i<=array_num;i++){var str=eval("mulpppoeArray"+i);var each_info=str.split(" ");if(flag=="edit"){if(each_info[1]==txt&&i!=select_edit){alert("$doname_dup");return false}}else{if(each_info[1]==txt){alert("$doname_dup");return false}}}cf.hidden_userdefined.value=cf.userdefined.value}else{cf.hidden_protocol_value.value=cf.protocol.value}if(cf.pppoe2_policy.selectedIndex==1||cf.pppoe2_policy.selectedIndex==3){cf.ip_start.value=cf.start_ip1.value+"."+cf.start_ip2.value+"."+cf.start_ip3.value+"."+cf.start_ip4.value;cf.ip_end.value=cf.start_ip1.value+"."+cf.start_ip2.value+"."+cf.start_ip3.value+"."+cf.end_ip4.value;if(checkipaddr(cf.ip_start.value)==false){alert("$invalid_ip");return false}if(checkipaddr(cf.ip_end.value)==false){alert("$invalid_ip");return false}if(cp_ip2(cf.ip_start.value,cf.ip_end.value)==false){alert("$invalid_ip_rang");return false}cf.hidden_ip_start.value=cf.ip_start.value;cf.hidden_ip_end.value=cf.ip_end.value}return true}function check_mulpppoe_addnum(b,a){b.submit_flag.value="mulpppoe_addnum";if(a==1){b.action="/apply.cgi?/BAS_mulpppoe_add.htm timestamp="+ts}else{b.action="/apply.cgi?/BAS_mulpppoe_add_ww.htm timestamp="+ts}return true}function check_mulpppoe_editnum(c,a){if(array_num==""){alert("$port_edit");return false}var d=0;var b;if(array_num==1){if(c.select_mulpppoe.checked==true){d++;b=1}}else{for(i=0;i<array_num;i++){if(c.select_mulpppoe[i].checked==true){d++;b=i+1}}}if(d==0){alert("$select_serv_edit");return false}else{c.select_edit.value=b;c.submit_flag.value="mulpppoe_editnum";if(a==1){c.action="/apply.cgi?/BAS_mulpppoe_edit.htm timestamp="+ts}else{c.action="/apply.cgi?/BAS_mulpppoe_edit_ww.htm timestamp="+ts}return true}}function check_mulpppoe_session1(b,a){if(b.pppoe_username.value==""){alert("$login_name_null");return false}for(i=0;i<b.pppoe_username.value.length;i++){if(isValidChar(b.pppoe_username.value.charCodeAt(i))==false){alert("$loginname_not_allowed");return false}}for(i=0;i<b.pppoe_passwd.value.length;i++){if(isValidChar(b.pppoe_passwd.value.charCodeAt(i))==false){alert("$password_not_allowed");return false}}for(i=0;i<b.pppoe_servername.value.length;i++){if(isValidChar(b.pppoe_servername.value.charCodeAt(i))==false){alert("$servname_not_allowed");return false}}if(b.pppoe_idletime.value.length<=0){alert("$idle_time_null");return false}else{if(!_isNumeric(b.pppoe_idletime.value)){alert("$invalid_idle_time");return false}}b.pppoe_idletime_value.value=b.pppoe_idletime.value*60;b.conflict_wanlan.value=0;if(b.WANAssign[1].checked){b.pppoe_ipaddr.value=b.WPethr1.value+"."+b.WPethr2.value+"."+b.WPethr3.value+"."+b.WPethr4.value;if(checkipaddr(b.pppoe_ipaddr.value)==false){alert("$invalid_ip");return false}if(isSameSubNet(b.pppoe_ipaddr.value,lan_subnet,lan_ip,lan_subnet)==true){b.conflict_wanlan.value=1}if(isSameIp(b.pppoe_ipaddr.value,lan_ip)==true){b.conflict_wanlan.value=1}}if(b.DNSAssign[1].checked){b.pppoe_dnsaddr1.value=b.PDAddr1.value+"."+b.PDAddr2.value+"."+b.PDAddr3.value+"."+b.PDAddr4.value;b.pppoe_dnsaddr2.value=b.DAddr1.value+"."+b.DAddr2.value+"."+b.DAddr3.value+"."+b.DAddr4.value;if(b.pppoe_dnsaddr2.value=="..."){b.pppoe_dnsaddr2.value=""}if(checkipaddr(b.pppoe_dnsaddr1.value)==false){alert("$invalid_primary_dns");return false}if(b.pppoe_dnsaddr2.value!=""){if(checkipaddr(b.pppoe_dnsaddr2.value)==false){alert("$invalid_second_dns");return false}}}b.hid_mtu_value.value=wan_mtu_now;if(!(old_wan_type=="mulpppoe1")){b.change_wan_type.value=0;mtu_change(wanproto_type)}else{if(old_pppoe_wan_assign=="1"){if(old_wan_ip!=b.pppoe_ipaddr.value&&b.WANAssign[1].checked){b.change_wan_type.value=0}else{if(b.WANAssign[0].checked){b.change_wan_type.value=0}else{b.change_wan_type.value=1}}}else{if(old_pppoe_wan_assign=="0"){if(old_wan_ip!=b.pppoe_ipaddr.value&&b.WANAssign[1].checked){b.change_wan_type.value=0}else{b.change_wan_type.value=1}}}}if(a!=0){b.run_test.value="test"}else{b.run_test.value="no"}b.mul_testnum.value="1";return true}function check_mulpppoe_session2(b,a){if(b.pppoe2_username.value==""){alert("$login_name_null");return false}for(i=0;i<b.pppoe2_username.value.length;i++){if(isValidChar(b.pppoe2_username.value.charCodeAt(i))==false){alert("$loginname_not_allowed");return false}}for(i=0;i<b.pppoe2_password.value.length;i++){if(isValidChar(b.pppoe2_password.value.charCodeAt(i))==false){alert("$password_not_allowed");return false}}for(i=0;i<b.pppoe2_servicename.value.length;i++){if(isValidChar(b.pppoe2_servicename.value.charCodeAt(i))==false){alert("$servname_not_allowed");return false}}if(b.WANAssign2[1].checked){b.pppoe2_ipaddr.value=b.pppoe2_ip1.value+"."+b.pppoe2_ip2.value+"."+b.pppoe2_ip3.value+"."+b.pppoe2_ip4.value;if(checkipaddr(b.pppoe2_ipaddr.value)==false){alert("$invalid_ip");return false}if(isSameSubNet(b.pppoe2_ipaddr.value,lan_subnet,lan_ip,lan_subnet)==true){b.conflict_wanlan.value=1}if(isSameIp(b.pppoe2_ipaddr.value,lan_ip)==true){b.conflict_wanlan.value=1}}if(b.DNSAssign2[1].checked){b.pppoe2_dnsaddr1.value=b.pppoe2_dnsp1.value+"."+b.pppoe2_dnsp2.value+"."+b.pppoe2_dnsp3.value+"."+b.pppoe2_dnsp4.value;b.pppoe2_dnsaddr2.value=b.pppoe2_dnss1.value+"."+b.pppoe2_dnss2.value+"."+b.pppoe2_dnss3.value+"."+b.pppoe2_dnss4.value;if(b.pppoe2_dnsaddr2.value=="..."){b.pppoe2_dnsaddr2.value=""}if(checkipaddr(b.pppoe2_dnsaddr1.value)==false){alert("$invalid_primary_dns");return false}if(b.pppoe2_dnsaddr2.value!=""){if(checkipaddr(b.pppoe2_dnsaddr2.value)==false){alert("$invalid_second_dns");return false}}}if(!(old_wan_type=="mulpppoe1")){b.change_wan_type.value=0}else{if(old_pppoe_wan_assign2=="1"){if(old_wan_ip2!=b.pppoe2_ipaddr.value&&b.WANAssign2[1].checked){b.change_wan_type.value=0}else{if(b.WANAssign2[0].checked){b.change_wan_type.value=0}else{b.change_wan_type.value=1}}}else{if(old_pppoe_wan_assign2=="0"){if(old_wan_ip2!=b.pppoe2_ipaddr.value&&b.WANAssign2[1].checked){b.change_wan_type.value=0}else{b.change_wan_type.value=1}}}}if(a!=0){b.run_test.value="test"}else{b.run_test.value="no"}b.mul_testnum.value="2";return true}function check_mulpppoe(b,a){format_IP("WPethr1","WPethr2","WPethr3","WPethr4","PDAddr1","PDAddr2","PDAddr3","PDAddr4","DAddr1","DAddr2","DAddr3","DAddr4","pppoe2_ip1","pppoe2_ip2","pppoe2_ip3","pppoe2_ip4","pppoe2_dnsp1","pppoe2_dnsp2","pppoe2_dnsp3","pppoe2_dnsp4","pppoe2_dnss1","pppoe2_dnss2","pppoe2_dnss3","pppoe2_dnss4");if(b.pppoe_username.value==""){alert("$login_name_null");return false}for(i=0;i<b.pppoe_username.value.length;i++){if(isValidChar(b.pppoe_username.value.charCodeAt(i))==false){alert("$loginname_not_allowed");return false}}for(i=0;i<b.pppoe_passwd.value.length;i++){if(isValidChar(b.pppoe_passwd.value.charCodeAt(i))==false){alert("$password_not_allowed");return false}}for(i=0;i<b.pppoe_servername.value.length;i++){if(isValidChar(b.pppoe_servername.value.charCodeAt(i))==false){alert("$servname_not_allowed");return false}}if(b.pppoe_idletime.value.length<=0){alert("$idle_time_null");return false}else{if(!_isNumeric(b.pppoe_idletime.value)){alert("$invalid_idle_time");return false}}b.pppoe_idletime_value.value=b.pppoe_idletime.value*60;b.conflict_wanlan.value=0;if(b.WANAssign[1].checked){b.pppoe_ipaddr.value=b.WPethr1.value+"."+b.WPethr2.value+"."+b.WPethr3.value+"."+b.WPethr4.value;if(checkipaddr(b.pppoe_ipaddr.value)==false){alert("$invalid_ip");return false}if(isSameSubNet(b.pppoe_ipaddr.value,lan_subnet,lan_ip,lan_subnet)==true){b.conflict_wanlan.value=1}if(isSameIp(b.pppoe_ipaddr.value,lan_ip)==true){b.conflict_wanlan.value=1}}if(b.DNSAssign[1].checked){b.pppoe_dnsaddr1.value=b.PDAddr1.value+"."+b.PDAddr2.value+"."+b.PDAddr3.value+"."+b.PDAddr4.value;b.pppoe_dnsaddr2.value=b.DAddr1.value+"."+b.DAddr2.value+"."+b.DAddr3.value+"."+b.DAddr4.value;if(b.pppoe_dnsaddr2.value=="..."){b.pppoe_dnsaddr2.value=""}if(checkipaddr(b.pppoe_dnsaddr1.value)==false){alert("$invalid_primary_dns");return false}if(b.pppoe_dnsaddr2.value!=""){if(checkipaddr(b.pppoe_dnsaddr2.value)==false){alert("$invalid_second_dns");return false}}}if(b.enable_session2[1].checked){if(b.pppoe2_username.value==""){alert("$login_name_null");return false}for(i=0;i<b.pppoe2_username.value.length;i++){if(isValidChar(b.pppoe2_username.value.charCodeAt(i))==false){alert("$loginname_not_allowed");return false}}for(i=0;i<b.pppoe2_password.value.length;i++){if(isValidChar(b.pppoe2_password.value.charCodeAt(i))==false){alert("$password_not_allowed");return false}}for(i=0;i<b.pppoe2_servicename.value.length;i++){if(isValidChar(b.pppoe2_servicename.value.charCodeAt(i))==false){alert("$servname_not_allowed");return false}}if(b.WANAssign2[1].checked){b.pppoe2_ipaddr.value=b.pppoe2_ip1.value+"."+b.pppoe2_ip2.value+"."+b.pppoe2_ip3.value+"."+b.pppoe2_ip4.value;if(checkipaddr(b.pppoe2_ipaddr.value)==false){alert("$invalid_ip");return false}if(isSameSubNet(b.pppoe2_ipaddr.value,lan_subnet,lan_ip,lan_subnet)==true){b.conflict_wanlan.value=1}if(isSameIp(b.pppoe2_ipaddr.value,lan_ip)==true){b.conflict_wanlan.value=1}}if(b.DNSAssign2[1].checked){b.pppoe2_dnsaddr1.value=b.pppoe2_dnsp1.value+"."+b.pppoe2_dnsp2.value+"."+b.pppoe2_dnsp3.value+"."+b.pppoe2_dnsp4.value;b.pppoe2_dnsaddr2.value=b.pppoe2_dnss1.value+"."+b.pppoe2_dnss2.value+"."+b.pppoe2_dnss3.value+"."+b.pppoe2_dnss4.value;if(b.pppoe2_dnsaddr2.value=="..."){b.pppoe2_dnsaddr2.value=""}if(checkipaddr(b.pppoe2_dnsaddr1.value)==false){alert("$invalid_primary_dns");return false}if(b.pppoe2_dnsaddr2.value!=""){if(checkipaddr(b.pppoe2_dnsaddr2.value)==false){alert("$invalid_second_dns");return false}}}}if(!(old_wan_type=="mulpppoe1")){b.change_wan_type.value=0}else{if(old_pppoe_wan_assign=="1"){if(old_wan_ip!=b.pppoe_ipaddr.value&&b.WANAssign[1].checked){b.change_wan_type.value=0}else{if(b.WANAssign[0].checked){b.change_wan_type.value=0}else{b.change_wan_type.value=1}}}else{if(old_pppoe_wan_assign=="0"){if(old_wan_ip!=b.pppoe_ipaddr.value&&b.WANAssign[1].checked){b.change_wan_type.value=0}else{b.change_wan_type.value=1}}}}if(a!=0){b.run_test.value="test";b.mul_testnum.value="0"}else{b.run_test.value="no";b.mul_testnum.value="0"}if(b.mulpppoe_demand.value=="1"||b.mulpppoe_demand.value=="2"){if(readycloud_enable=="1"||vpn_enable=="1"||upnp_enableMedia=="1"||parent.geniecloud_flag=="1"){if(confirm("$ppp_dial_on_demand_query")==false){return false}}}return true}function set_gray(a){cf=document.forms[0];if(a==0){cf.pppoe2_username.disabled=true;cf.pppoe2_password.disabled=true;cf.pppoe2_servicename.disabled=true}else{cf.pppoe2_username.disabled=false;cf.pppoe2_password.disabled=false;cf.pppoe2_servicename.disabled=false}}function change_session(){cf=document.forms[0];if(cf.pppoe2_session[0].selected==true){getObj("view_session").innerHTML=westHTML;cf.pppoe2_username.value=west_username;cf.pppoe2_password.value=west_password;cf.pppoe2_servicename.value=west_servicename}else{if(document.forms[0].pppoe2_session[1].selected==true){getObj("view_session").innerHTML=eastHTML;cf.pppoe2_username.value=east_username;cf.pppoe2_password.value=east_password;cf.pppoe2_servicename.value=east_servicename}else{if(document.forms[0].pppoe2_session[2].selected==true){getObj("view_session").innerHTML=otherHTML;cf.pppoe2_username.value=other_username;cf.pppoe2_password.value=other_password;cf.pppoe2_servicename.value=other_servicename;cf.pppoe2_policy.value=pppoe2_policy}}}}function check_mulpppoe_del(c,a){if(array_num==""){alert("$port_del");return false}var d=0;var b;if(array_num==1){if(c.select_mulpppoe.checked==true){d++;b=1}}else{for(i=0;i<array_num;i++){if(c.select_mulpppoe[i].checked==true){d++;b=i+1}}}if(d==0){alert("$select_serv_del");return false}else{c.select_del.value=b;c.submit_flag.value="mulpppoe_del";if(a==1){c.action="/apply.cgi?/BAS_mulpppoe.htm timestamp="+ts}else{c.action="/apply.cgi?/BAS_mulpppoe_ww.htm timestamp="+ts}return true}};