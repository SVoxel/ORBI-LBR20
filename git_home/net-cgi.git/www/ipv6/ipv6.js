function show_ipv6_ip(h){var k,f,d,l;var g,c,a,j,b;var e;k=h.split("/");if(k.length>1){if(parseInt(k[1])>=128){document.write("<u>"+k[0]+"</u>/"+k[1]);return}g=Math.ceil(parseInt(k[1])/4);c=Math.floor(g/4);a=g%4;f=k[0].split(":");j=-1;for(e=0;e<f.length;e++){if(f[e]==""){j=e}}blank_length=8-f.length;if(c>j+blank_length){c=c-blank_length}else{if(j<c&&c<=j+blank_length){c=j}}a=a-(4-f[c].length);d="";for(e=0;e<c;e++){d=d+f[e]+":"}if(a>0){d=d+f[c].substring(0,a);l=f[c].substring(a,f[c].length)}else{l=f[c]}for(e=c+1;e<f.length;e++){l=l+":"+f[e]}for(e=d.length-1;e>=0;e--){if(d[e]==":"){l=":"+l}else{break}}d=d.substring(0,e+1);document.write("<u>"+d+"</u>"+l+"/"+k[1])}else{document.write(h)}}function ipv6_write_ip(a){if(a!=""){a=remove_space(a)}if(a==""){document.write("<TR><TD nowrap class=indent_20>$ipv6_not_available</TD></TR>")}else{var c=a.split(" ");var b;for(b=0;b<c.length;b++){document.write("<TR><TD nowrap class=indent_20>");show_ipv6_ip(c[b]);document.write("</TD></TR>")}}}function ipv6_write_dns(b,c,a){if(b==""){document.write("<TR><TD nowrap class=indent_20>$ipv6_not_available</TD></TR>")}else{if(c==""&&a==""){document.write("<TR><TD nowrap class=indent_20>$ipv6_not_available</TD></TR>")}else{if(c!=""){document.write("<TR><TD nowrap class=indent_20>");document.write(c);document.write("</TD></TR>")}if(a!=""){document.write("<TR><TD nowrap class=indent_20>");document.write(a);document.write("</TD></TR>")}}}}function ipv6_load_common(b){if(ipv6_ip_assign=="1"){b.IpAssign[0].checked=true}else{if(ipv6_ip_assign=="0"){b.IpAssign[1].checked=true}}if(ipv6_interface_type=="1"){b.useInterfaceId.checked=true}else{b.useInterfaceId.checked=false}set_interface();var a=ipv6_interface_id.split(":");b.IPv6_interface_id1.value=a[0];b.IPv6_interface_id2.value=a[1];b.IPv6_interface_id3.value=a[2];b.IPv6_interface_id4.value=a[3];if(ipv6_cone_fitering==0){b.IPv6Filtering[0].checked=true}else{if(ipv6_cone_fitering==1){b.IPv6Filtering[1].checked=true}}}function ipv6_save_common(cf){var i;if(cf.IpAssign[0].checked==true){cf.ipv6_hidden_ip_assign.value="1"}else{cf.ipv6_hidden_ip_assign.value="0"}if(cf.useInterfaceId.checked==true){cf.ipv6_hidden_enable_interface.value="1";cf.ipv6_hidden_interface_id.value="";for(i=1;i<=4;i++){var interface_value=eval('document.getElementsByName("IPv6_interface_id'+i+'")[0]').value;if(check_ipv6_IP_address(interface_value)==false){alert("$ipv6_invalid_interface_id");return false}if(interface_value==""){interface_value="0"}if(i<4){cf.ipv6_hidden_interface_id.value=cf.ipv6_hidden_interface_id.value+interface_value+":"}else{if(i==4){if(interface_value=="0"){alert("$ipv6_invalid_interface_id");return false}else{cf.ipv6_hidden_interface_id.value=cf.ipv6_hidden_interface_id.value+interface_value}}}}}else{cf.ipv6_hidden_enable_interface.value="0"}if(cf.IPv6Filtering[0].checked==true){cf.ipv6_hidden_filtering.value="0"}else{if(cf.IPv6Filtering[1].checked==true){cf.ipv6_hidden_filtering.value="1"}}return true}function set_interface(){var a=document.forms[0];if(a.useInterfaceId.checked==true){a.IPv6_interface_id1.disabled=false;a.IPv6_interface_id2.disabled=false;a.IPv6_interface_id3.disabled=false;a.IPv6_interface_id4.disabled=false}else{if(a.useInterfaceId.checked==false){a.IPv6_interface_id1.disabled=true;a.IPv6_interface_id2.disabled=true;a.IPv6_interface_id3.disabled=true;a.IPv6_interface_id4.disabled=true}}}function check_ipv6_DNS_address(a){var b;if(a!=""){for(b=0;b<a.length;){if((a.charAt(b)>="0"&&a.charAt(b)<="9")||(a.charAt(b)>="a"&&a.charAt(b)<="f")||(a.charAt(b)>="A"&&a.charAt(b)<="F")){b++}else{return false}}}return true}function check_ipv6_IP_address(b){var a;if(b!=""){for(a=0;a<b.length;){if((b.charAt(a)>="0"&&b.charAt(a)<="9")||(b.charAt(a)>="a"&&b.charAt(a)<="f")||(b.charAt(a)>="A"&&b.charAt(a)<="F")){a++}else{return false}}}return true}function change_conn_type_name(b){var a;if(b=="Detecting..."){a="$ipv6_detecting"}else{if(b=="6to4 Tunnel"){a="$ipv6_6to4_tunnel"}else{if(b=="Pass Through"){a="$ipv6_pass_through"}else{if(b=="Auto Config"){a="$ipv6_auto_config"}else{if(b=="DHCP"){a="$router_status_dhcp"}else{a=b}}}}}return a}function setIPv6DNS(cf){var dflag=cf.DNSAssign[0].checked;for(i=1;i<=8;i++){eval('document.getElementsByName("PDAddr'+i+'")[0]').disabled=dflag;eval('document.getElementsByName("SDAddr'+i+'")[0]').disabled=dflag}}function check_addr_legality(a){if(a.charAt(0).toLowerCase()=="f"&&a.charAt(1).toLowerCase()=="f"){return false}if(a==":::::::1"||a=="0:0:0:0:0:0:0:1"){return false}return true}function checkIPv6DNS(cf){if(cf.DNSAssign[1].checked){cf.ipv6_hidden_primary_dns.value="";cf.ipv6_hidden_second_dns.value="";var check_pri_dns=1;var check_sec_dns=1;var pri_dns="";var sec_dns="";for(i=1;i<=8;i++){pri_dns=pri_dns+eval('document.getElementsByName("PDAddr'+i+'")[0]').value;sec_dns=sec_dns+eval('document.getElementsByName("SDAddr'+i+'")[0]').value}if(pri_dns==""){check_pri_dns=0}if(sec_dns==""){check_sec_dns=0}if(check_pri_dns==0&&check_sec_dns==0){alert("$dns_must_specified");return false}for(i=1;i<=8;i++){if(check_pri_dns){var pri_dns_value=eval('document.getElementsByName("PDAddr'+i+'")[0]').value;if(check_ipv6_DNS_address(pri_dns_value)==false){alert("$invalid_ipv6_primary_dns_hex");return false}if(pri_dns_value!=""){pri_dns_value=parseInt(pri_dns_value,16).toString(16)}if(pri_dns_value==""){cf.ipv6_hidden_primary_dns.value=cf.ipv6_hidden_primary_dns.value+"0:"}else{cf.ipv6_hidden_primary_dns.value=cf.ipv6_hidden_primary_dns.value+pri_dns_value+":"}}if(check_sec_dns){var sec_dns_value=eval('document.getElementsByName("SDAddr'+i+'")[0]').value;if(check_ipv6_DNS_address(sec_dns_value)==false){alert("$invalid_ipv6_second_dns_hex");return false}if(sec_dns_value!=""){sec_dns_value=parseInt(sec_dns_value,16).toString(16)}if(sec_dns_value==""){cf.ipv6_hidden_second_dns.value=cf.ipv6_hidden_second_dns.value+"0:"}else{cf.ipv6_hidden_second_dns.value=cf.ipv6_hidden_second_dns.value+sec_dns_value+":"}}}var str=cf.ipv6_hidden_primary_dns.value;cf.ipv6_hidden_primary_dns.value=str.substring(0,str.length-1);if(cf.ipv6_hidden_primary_dns.value==":::::::"){cf.ipv6_hidden_primary_dns.value=""}else{if(cf.ipv6_hidden_primary_dns.value=="0:0:0:0:0:0:0:0"){alert("$invalid_ipv6_primary_dns");return false}}if(cf.ipv6_hidden_primary_dns.value!=""){if(check_addr_legality(cf.ipv6_hidden_primary_dns.value)==false){alert("$invalid_ipv6_primary_dns");return false}}str=cf.ipv6_hidden_second_dns.value;cf.ipv6_hidden_second_dns.value=str.substring(0,str.length-1);if(cf.ipv6_hidden_second_dns.value==":::::::"){cf.ipv6_hidden_second_dns.value=""}else{if(cf.ipv6_hidden_second_dns.value=="0:0:0:0:0:0:0:0"){alert("$invalid_ipv6_second_dns");return false}}if(cf.ipv6_hidden_second_dns.value!=""){if(check_addr_legality(cf.ipv6_hidden_second_dns.value)==false){alert("$invalid_ipv6_second_dns");return false}else{if(cf.ipv6_hidden_primary_dns.value==cf.ipv6_hidden_second_dns.value){alert("$invalid_primary_second_dns");return false}}}}}function load_ipv6_dns(cf){if(get_dns_assign=="0"){cf.DNSAssign[0].checked=true}else{cf.DNSAssign[1].checked=true}setIPv6DNS(cf);if(ipv6_get_dns1!=""){var ipv6_primary_dns=ipv6_get_dns1.split(":");for(i=1;i<=ipv6_primary_dns.length;i++){if(ipv6_primary_dns[i-1]==""){eval('document.getElementsByName("PDAddr'+i+'")[0]').value="0"}else{eval('document.getElementsByName("PDAddr'+i+'")[0]').value=ipv6_primary_dns[i-1]}}}if(ipv6_get_dns2!=""){var ipv6_second_dns=ipv6_get_dns2.split(":");for(i=1;i<=ipv6_second_dns.length;i++){if(ipv6_second_dns[i-1]==""){eval('document.getElementsByName("SDAddr'+i+'")[0]').value="0"}else{eval('document.getElementsByName("SDAddr'+i+'")[0]').value=ipv6_second_dns[i-1]}}}}function load_mapt(){var c=document.forms[0];var b;if(enable_value=="1"){c.cb_enable.checked=true}else{c.cb_enable.checked=false}if(type_value=="1"){c.rd_type[1].checked=true}else{c.rd_type[0].checked=true}var d=local_ipv6.split(":");for(b=0;b<d.length;b++){if(d[b]==""&&local_ipv6!=""){c.tx_lol_ipv6[b].value="0"}else{c.tx_lol_ipv6[b].value=d[b]}}if(local_ipv6_pre_len==""&&local_ipv6!=""){c.tx_lol_ipv6_prefix.value="0"}else{c.tx_lol_ipv6_prefix.value=local_ipv6_pre_len}var a=local_ipv4.split(".");if(a.length==4){for(b=0;b<4;b++){c.tx_lol_ipv4[b].value=a[b]}}if(local_ipv4_pre_len==""&&local_ipv4!=""){c.tx_lol_ipv4_prefix.value="0"}else{c.tx_lol_ipv4_prefix.value=local_ipv4_pre_len}c.tx_lol_ea.value=local_ea;var e=remote_ipv6.split(":");for(b=0;b<e.length;b++){if(e[b]==""&&remote_ipv6!=""){c.tx_rmo_ipv6[b].value="0"}else{c.tx_rmo_ipv6[b].value=e[b]}}if(remote_ipv6_pre_len==""&&remote_ipv6!=""){c.tx_rmo_ipv6_prefix.value="0"}else{c.tx_rmo_ipv6_prefix.value=remote_ipv6_pre_len}c.psidoffset.value=loc_psidoffset}function check_ipv6_ip(e,c){var f="";for(var b=0;b<e.length;b++){var d=e[b].value;for(var a=0;a<d.length;a++){if(isValidHex(d.charAt(a))==false){return false}}if(d!=""){d=parseInt(d,16).toString(16)}if(d==""){f=f+"0:"}else{f=f+d+":"}}c.value=f.substring(0,f.length-1);return true}function check_mapt(a){if(a.cb_enable.checked==true){a.hid_cb_enable.value="1"}else{a.hid_cb_enable.value="0"}if(a.rd_type[1].checked==true){if(!check_ipv6_ip(a.tx_lol_ipv6,a.hid_tx_lol_ipv6)){alert("$invalid_loc_ipv6_addr");return false}a.hid_tx_lol_ipv4.value=a.tx_lol_ipv4[0].value+"."+a.tx_lol_ipv4[1].value+"."+a.tx_lol_ipv4[2].value+"."+a.tx_lol_ipv4[3].value;if(checkipaddr(a.hid_tx_lol_ipv4.value)==false){alert("$invalid_loc_ipv4_addr");return false}if(!check_ipv6_ip(a.tx_rmo_ipv6,a.hid_tx_rmo_ipv6)){alert("$invalid_remote_ipv6_addr");return false}}return true}function abbr_ipv6(e){var d=e.split(":");var f=-1,a=-1,b="";for(var c=0;c<d.length;c++){if(d[c]=="0"){if(f==-1){f=c}else{a=c}}else{if(a-f>0){break}else{f=-1;a=-1}}}if(a-f>0){for(var c=0;c<f;c++){b+=d[c]+":"}if(f==0){b+="::"}else{b+=":"}for(var c=a+1;c<d.length;c++){if(c!=d.length-1){b+=d[c]+":"}else{b+=d[c]}}}else{b=e}return b}function login_type_show(b){var h=b.login_type;var e=top.ipv6_6rd_flag;var j=top.ipv6_auto_detect;var a=top.ipv6_dhcp_flag;var d=top.ipv6_pppoe_flag;var c=new Array("disabled","$pppoe2_disable","autoDetect","$ipv6_auto_detect","autoConfig","$ipv6_auto_config","6to4","$ipv6_6to4_tunnel","6rd","6rd","bridge","$ipv6_pass_through","fixed","$ipv6_fixed","dhcp","$router_status_dhcp","pppoe","$basic_intserv_pppoe","orange","Orange France");var f=0;h.options.length=20;for(i=0;i<c.length;i+=2){if((e!=1&&c[i]=="6rd")||(j!=1&&c[i]=="autoDetect")||(a!=1&&c[i]=="dhcp")||(d!=1&&c[i]=="pppoe")){continue}else{if(c[i]=="orange"){var g=top.netgear_region;if(g=="WW"&&top.support_orange_vlan=="1"){h.options[f].text=c[i+1];h.options[f].value=c[i];f++}}else{h.options[f].text=c[i+1];h.options[f].value=c[i];f++}}}h.options.length=f};