var error_email_addr="$error_email_addr";var user_name_error="$user_name_error";var user_name_null="$user_name_null";var password_error="$password_error";var password_null="$password_null";function setPort(a){if(a.portnum_auto){if(a.portnum_auto[0].checked){a.email_port.disabled=true}else{a.email_port.disabled=false}}}function setGray(c,a,b){if(c.email_notify.checked){c.block_site.disabled=false;c.email_smtp.disabled=false;c.email_addr.disabled=false;if(c.email_addr2){c.email_addr2.disabled=false}c.email_port.disabled=false;if(c.portnum_auto){c.portnum_auto[0].disabled=false;c.portnum_auto[1].disabled=false}c.cfAlert_Select.disabled=false;c.smtp_auth.disabled=false;if(c.sec_connection){c.sec_connection.disabled=false}if(a==1){c.block_site.checked=true}}else{c.block_site.disabled=true;c.email_smtp.disabled=true;c.email_addr.disabled=true;if(c.email_addr2){c.email_addr2.disabled=true}c.email_port.disabled=true;if(c.portnum_auto){c.portnum_auto[0].disabled=true;c.portnum_auto[1].disabled=true}c.cfAlert_Select.disabled=true;c.smtp_auth.disabled=true;c.cfAlert_Day.disabled=true;c.cfAlert_Hour.disabled=true;if(b==0){c.cfAlert_am[0].disabled=true;c.cfAlert_am[1].disabled=true}if(c.sec_connection){c.sec_connection.disabled=true}}setAuth(c)}function setAuth(a){if(a.email_notify.checked){if(a.smtp_auth.checked==true){a.auth_user.disabled=false;a.auth_pwd.disabled=false}else{a.auth_user.disabled=true;a.auth_pwd.disabled=true}}else{a.auth_user.disabled=true;a.auth_pwd.disabled=true}}function change_type(a,b){if(a==0){b.email_this_addr.disabled=true}else{b.email_this_addr.disabled=false}}function disable_am(b,a){a.cfAlert_am[0].disabled=b;a.cfAlert_am[1].disabled=b}function OnAlertChange(c,b){var a=c.cfAlert_Select.selectedIndex;if((a==0)||(a==1)||(a==4)){c.cfAlert_Day.selectedIndex=0;c.cfAlert_Hour.selectedIndex=0;c.cfAlert_Day.disabled=true;c.cfAlert_Hour.disabled=true;AlertTimeDisabled=true;AlertHourDisabled=true;if(b==0){disable_am(true,c)}}else{if(a==2){c.cfAlert_Day.selectedIndex=0;c.cfAlert_Day.disabled=true;c.cfAlert_Hour.disabled=false;AlertTimeDisabled=true;AlertHourDisabled=false;if(b==0){disable_am(false,c)}}else{if(a==3){c.cfAlert_Day.disabled=false;c.cfAlert_Hour.disabled=false;AlertTimeDisabled=false;AlertHourDisabled=false;if(b==0){disable_am(false,c)}}}}}function check_email(cf,hour_24_flag){if(cf.email_notify.checked){cf.email_notify_enabled.value="1";if(cf.email_smtp.value==""){alert("$error_email_smtp");cf.email_smtp.focus();return false}if(cf.email_addr.value==""){alert("$fill_primary_email");return false}if(cf.portnum_auto){if(cf.portnum_auto[0].checked==true){cf.email_port_sta.value=1}else{cf.email_port_sta.value=0}}var emailPort=parseInt(cf.email_port.value,10);if((cf.portnum_auto&&cf.portnum_auto[1].checked==true)||!cf.portnum_auto){if(isNaN(emailPort)||emailPort<=0||emailPort>=65535){alert("$invalid_email_port");return false}}for(i=1;i<=forward_array_num;i++){var str=eval("forwardingArray"+i).replace(/&#92;/g,"\\").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#40;/g,"(").replace(/&#41;/g,")").replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#35;/g,"#").replace(/&#38;/g,"&");var each_info=str.split(" "),ext_startport=parseInt(each_info[2],10),ext_endport=parseInt(each_info[3],10),int_startport=parseInt(each_info[4],10),int_endport=parseInt(each_info[5],10);if((emailPort>=ext_startport&&emailPort<=ext_endport)||(emailPort>=int_startport&&emailPort<=int_endport)){alert("$invalid_port_used");return false}}for(i=1;i<=trigger_array_num;i++){var str=eval("triggeringArray"+i).replace(/&#92;/g,"\\").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#40;/g,"(").replace(/&#41;/g,")").replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#35;/g,"#").replace(/&#38;/g,"&");var each_info=str.split(" "),constart_port=parseInt(each_info[6],10),conend_port=parseInt(each_info[7],10);if(emailPort>=constart_port&&emailPort<=conend_port){alert("$invalid_port_used");return false}}for(i=1;i<=upnp_array_num;i++){var str=eval("upnpArray"+i);var each_info=str.split(";"),upnp_int=parseInt(each_info[2],10),upnp_ext=parseInt(each_info[3],10);if(emailPort==upnp_int||emailPort==upnp_ext){alert("$invalid_port_used");return false}}if(usb_router_flag==1){if(check_readyshare_port(cf.email_port.value,cf.email_port.value,"WAN")==false){alert("$invalid_port_used");return false}}if(parseInt(remote_port)==emailPort&&remote_port!=""){alert("$invalid_port_used");return false}if(cf.email_port){cf.email_port.value=parseInt(cf.email_port.value,10)}if(cf.smtp_auth.checked==true){if(cf.auth_user.value==""){alert("$user_name_null");return false}if(cf.auth_pwd.value==""){alert("$password_null");return false}cf.email_endis_auth.value=1}else{cf.email_endis_auth.value=0}}else{cf.email_notify_enabled.value="0";if(cf.smtp_auth.checked==true){cf.email_endis_auth.value=1}else{cf.email_endis_auth.value=0}}for(i=0;i<cf.auth_user.value.length;i++){if(isValidChar(cf.auth_user.value.charCodeAt(i))==false){alert("$user_name_error");return false}}var true_password=document.getElementById("auth_pwd").getAttribute("password");for(i=0;i<true_password.length;i++){if(isValidChar(true_password.charCodeAt(i))==false){alert("$password_error");return false}}for(i=0;i<cf.email_smtp.value.length;i++){if(isValidChar(cf.email_smtp.value.charCodeAt(i))==false){alert("$error_email_smtp");cf.email_smtp.focus();return false}}for(i=0;i<cf.email_addr.value.length;i++){if(isValidChar(cf.email_addr.value.charCodeAt(i))==false){alert("$error_email_addr");cf.email_addr.focus();return false}}if(cf.email_addr2&&cf.email_addr2.value!=""){for(i=0;i<cf.email_addr2.value.length;i++){if(isValidChar(cf.email_addr2.value.charCodeAt(i))==false){alert("$error_email_addr");cf.email_addr2.focus();return false}}if((cf.email_addr2.value.indexOf("@",0)==-1||cf.email_addr2.value.indexOf(".",0)==-1)&&cf.email_addr2.value!=""){alert("$error_email_addr");cf.email_addr2.focus();return false}}if(cf.email_addr.value!=""){if(cf.email_addr.value.indexOf("@",0)==-1||cf.email_addr.value.indexOf(".",0)==-1){alert("$error_email_addr");cf.email_addr.focus();return false}}if(cf.send_email_noti.checked){cf.send_email_noti_hid.value="1"}else{cf.send_email_noti_hid.value="0"}if(cf.block_site.checked){cf.send_alert_immediately.value="1"}else{cf.send_alert_immediately.value="0"}var schedule_time=parseInt(cf.cfAlert_Hour.value);if(cf.cfAlert_Select.selectedIndex==2){if(hour_24_flag==0){if(cf.cfAlert_am[1].checked){schedule_time=schedule_time+12}}cf.schedule_hour.value=schedule_time}if(cf.cfAlert_Select.selectedIndex==3){if(hour_24_flag==0){if(cf.cfAlert_am[1].checked){schedule_time=schedule_time+12}}cf.schedule_hour.value=schedule_time}cf.email_addr_hid1.value=cf.email_addr.value;if(cf.email_addr2){cf.email_addr_hid2.value=cf.email_addr2.value}if(cf.email_port.value!=""){cf.email_port_num.value=parseInt(cf.email_port.value,10)}else{cf.email_port_num.value=""}cf.email_smtp_hid.value=cf.email_smtp.value;cf.auth_user_hid.value=cf.auth_user.value;cf.auth_pwd_hid.value=document.getElementById("auth_pwd").getAttribute("password");cf.cfAlert_Select_hid.value=cf.cfAlert_Select.value;cf.cfAlert_Day_hid.value=cf.cfAlert_Day.value;if(cf.portnum_auto&&cf.portnum_auto[0].checked==true){parent.smtp_auto_detect=1}cf.submit();return true};